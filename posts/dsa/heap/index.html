<!doctype html><html class=no-js lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>Heap - Kei's Blog</title>
<script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script>
<meta name=description content>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Heap">
<meta name=twitter:description content="Heap Heap is a special Tree-based data structure in which tree is a complete binary tree. Heaps are basically are binary trees with more properties and specifications and there are mainly two types of heaps.
Rules
 A heap must be a complete binary tree.  All of the levels of the tree must be completely filled except maybe the last one. The last level has all keys as left as possible    Types of heap Min Heap">
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link rel=dns-prefetch href=//fonts.googleapis.com>
<link rel=dns-prefetch href=//fonts.gstatic.com>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
<link rel=stylesheet href=/css/style.css>
<link rel=stylesheet href=/css/custom.css>
<link rel="shortcut icon" href=/favicon.ico>
</head>
<body class=body>
<div class="container container--outer">
<header class=header>
<div class="container header__container">
<div class=logo>
<a class=logo__link href=/ title="Kei's Blog" rel=home>
<div class="logo__item logo__text">
<div class=logo__title>Kei's Blog</div>
</div>
</a>
</div>
<div class=divider></div>
</div>
</header>
<div class="wrapper flex">
<div class=primary>
<main class=main role=main>
<article class=post>
<header class=post__header>
<h1 class=post__title>Heap</h1>
<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2022-04-13T00:00:00Z>April 13, 2022</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/dsa/ rel=category>DSA</a>
</span>
</div></div>
</header>
<div class="post__toc toc">
<div class=toc__title>Page content</div>
<div class=toc__menu>
<nav id=TableOfContents>
<ul>
<li><a href=#types-of-heap>Types of heap</a></li>
<li><a href=#implementation>Implementation</a></li>
<li><a href=#reference>Reference</a></li>
</ul>
</nav>
</div>
</div><div class="content post__content clearfix">
<h1 id=heap>Heap</h1>
<p>Heap is a special Tree-based data structure in which tree is a complete binary tree.
Heaps are basically are binary trees with more properties and specifications and there are mainly two types of heaps.</p>
<p>Rules</p>
<ul>
<li>A heap must be a complete binary tree.
<ul>
<li>All of the levels of the tree must be completely filled except maybe the last one.</li>
<li>The last level has all keys as left as possible</li>
</ul>
</li>
</ul>
<h2 id=types-of-heap>Types of heap</h2>
<p><code>Min Heap</code></p>
<p>In min heap, all elements are smaller than their children. The root node will be the smallest element.</p>
<p><code>Max Heap</code></p>
<p>In max heap, all elements are bigger than their children. The root node will be the biggest element.</p>
<figure><img src=./minmax_heap.png alt="Query Suggestion" width=100%>
</figure>
<h2 id=implementation>Implementation</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># A Binary Heap is a Complete Binary Tree. A binary heap is typically represented as array. The representation is done as:</span>

<span style=color:#75715e># The root element will be at Arr[0].</span>
<span style=color:#75715e># Below table shows indexes of other nodes for the ith node, i.e., Arr[i]:</span>
<span style=color:#75715e># Arr[(i-1)/2] Returns the parent_idx node</span>
<span style=color:#75715e># Arr[(2*i)+1] Returns the left child node</span>
<span style=color:#75715e># Arr[(2*i)+2] Returns the right child node</span>

<span style=color:#f92672>import</span> sys

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MinHeap</span>:
    <span style=color:#66d9ef>def</span> __init__(self, maxsize):
        self<span style=color:#f92672>.</span>maxsize <span style=color:#f92672>=</span> maxsize
        <span style=color:#75715e># Initialize the first value with the smallest value</span>
        <span style=color:#75715e># With this first value, calculation to get parent_idx and children gets a little simpler</span>
        self<span style=color:#f92672>.</span>heap_list <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> (maxsize <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)
        self<span style=color:#f92672>.</span>heap_list[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>*</span> sys<span style=color:#f92672>.</span>maxsize
        self<span style=color:#f92672>.</span>size <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
        <span style=color:#75715e># Actual root index</span>
        self<span style=color:#f92672>.</span>ROOT_IDX <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>

    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>parent_idx</span>(self, idx):
        <span style=color:#66d9ef>return</span> idx <span style=color:#f92672>//</span> <span style=color:#ae81ff>2</span>

    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>left_child_idx</span>(self, idx):
        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> idx

    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>right_child_idx</span>(self, idx):
        <span style=color:#66d9ef>return</span> (<span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> idx) <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>

    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>is_leaf</span>(self, idx):
        <span style=color:#75715e># If left child index is bigger than self.size, it means there is no child as this is a complete binary tree</span>
        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> idx <span style=color:#f92672>&gt;</span> self<span style=color:#f92672>.</span>size

    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>swap</span>(self, fi, si):
        self<span style=color:#f92672>.</span>heap_list[fi], self<span style=color:#f92672>.</span>heap_list[si] <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>heap_list[si], self<span style=color:#f92672>.</span>heap_list[fi]

    <span style=color:#75715e># Heapify the value in the given idx from top to bottom</span>
    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>min_heapify</span>(self, idx):
        li <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>left_child_idx(idx)
        ri <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>right_child_idx(idx)
        curr <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>heap_list[idx]
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> self<span style=color:#f92672>.</span>is_leaf(idx):
            l, r <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>heap_list[li], self<span style=color:#f92672>.</span>heap_list[ri]
            <span style=color:#66d9ef>if</span> l <span style=color:#f92672>&lt;</span> curr <span style=color:#f92672>or</span> r <span style=color:#f92672>&lt;</span> curr:
                <span style=color:#66d9ef>if</span> l <span style=color:#f92672>&lt;</span> r:
                    self<span style=color:#f92672>.</span>swap(idx, li)
                    self<span style=color:#f92672>.</span>min_heapify(li)
                <span style=color:#66d9ef>else</span>:
                    self<span style=color:#f92672>.</span>swap(idx, ri)
                    self<span style=color:#f92672>.</span>min_heapify(ri)

 	<span style=color:#75715e># O(Log n)</span>
    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>insert</span>(self, new_el):
        <span style=color:#66d9ef>if</span> self<span style=color:#f92672>.</span>size <span style=color:#f92672>&gt;=</span> self<span style=color:#f92672>.</span>maxsize:
            print(<span style=color:#e6db74>&#34;Heap maxsize exceeded&#34;</span>)
            <span style=color:#66d9ef>return</span>
        self<span style=color:#f92672>.</span>size <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
        self<span style=color:#f92672>.</span>heap_list[self<span style=color:#f92672>.</span>size] <span style=color:#f92672>=</span> new_el
        tail_idx <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>size
        pi <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>parent_idx(tail_idx)
        <span style=color:#75715e># Heapify the inserted value from bottom to top while it&#39;s bigger than the parent</span>
        <span style=color:#66d9ef>while</span> self<span style=color:#f92672>.</span>heap_list[tail_idx] <span style=color:#f92672>&lt;</span> self<span style=color:#f92672>.</span>heap_list[pi]:
            self<span style=color:#f92672>.</span>swap(tail_idx, pi)
            tail_idx <span style=color:#f92672>=</span> pi
            pi <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>parent_idx(tail_idx)

	<span style=color:#75715e># O(Log n)</span>
    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>extract_min</span>(self):
        <span style=color:#66d9ef>if</span> self<span style=color:#f92672>.</span>size <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1</span>:
            print(<span style=color:#e6db74>&#34;Empty Heap&#34;</span>)
            <span style=color:#66d9ef>return</span>
        min_ele <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>heap_list[self<span style=color:#f92672>.</span>ROOT_IDX]
        <span style=color:#75715e># Swap the root with the last element</span>
        self<span style=color:#f92672>.</span>heap_list[self<span style=color:#f92672>.</span>ROOT_IDX] <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>heap_list[self<span style=color:#f92672>.</span>size]
        self<span style=color:#f92672>.</span>size <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
		<span style=color:#75715e># Heapify heap_list from top to bottom</span>
        self<span style=color:#f92672>.</span>min_heapify(self<span style=color:#f92672>.</span>ROOT_IDX)
        <span style=color:#66d9ef>return</span> min_ele

	<span style=color:#75715e># O(1)</span>
	<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_min</span>(self):
        <span style=color:#66d9ef>if</span> self<span style=color:#f92672>.</span>size <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1</span>:
            print(<span style=color:#e6db74>&#34;Empty Heap&#34;</span>)
            <span style=color:#66d9ef>return</span>
        <span style=color:#66d9ef>return</span> self<span style=color:#f92672>.</span>heap_list[self<span style=color:#f92672>.</span>ROOT_IDX]
</code></pre></div><h2 id=reference>Reference</h2>
<p><a href=https://www.geeksforgeeks.org/heap-data-structure/>Heap Data Structure</a>
<a href="https://www.youtube.com/watch?v=t0Cq6tVNRBA">Data Structures: Heaps</a>
<a href=https://medium.com/basecs/learning-to-love-heaps-cef2b273a238>Learning to Love Heaps</a>
<a href=https://www.educative.io/edpresso/heap-implementation-in-python>Heap implementation in Python</a></p>
</div>
<footer class=post__footer>
<div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg>
<ul class=tags__list>
<li class=tags__item>
<a class="tags__link btn" href=/tags/heap/ rel=tag>Heap</a>
</li>
<li class=tags__item>
<a class="tags__link btn" href=/tags/tree/ rel=tag>Tree</a>
</li>
<li class=tags__item>
<a class="tags__link btn" href=/tags/python/ rel=tag>Python</a>
</li>
<li class=tags__item>
<a class="tags__link btn" href=/tags/english-article/ rel=tag>English Article</a>
</li>
</ul>
</div>
</footer>
</article>
</main>
<div class="authorbox clearfix">
<figure class=authorbox__avatar>
<img alt="Keigo Kida avatar" src=/img/avatar.jpeg class=avatar height=90 width=90>
</figure>
<div class=authorbox__header>
<span class=authorbox__name>About Keigo Kida</span>
</div>
<div class=authorbox__description>
Software Engineer living in Japan
</div>
</div>
</div>
<aside class=sidebar>
<div class="widget-recent widget">
<h4 class=widget__title>Recent Posts</h4>
<div class=widget__content>
<ul class=widget__list>
<li class=widget__item><a class=widget__link href=/posts/public_cloud/gcp/>GCP random notes</a></li>
<li class=widget__item><a class=widget__link href=/posts/dsa/graph/>Intro to Graphs</a></li>
<li class=widget__item><a class=widget__link href=/posts/software_design/system_design/>Random Notes for system design</a></li>
<li class=widget__item><a class=widget__link href=/posts/dsa/bfs_dfs/>BFS and DFS</a></li>
<li class=widget__item><a class=widget__link href=/posts/dsa/queue_stacks/>Stack and Queue</a></li>
</ul>
</div>
</div>
<div class="widget-categories widget">
<h4 class=widget__title>Categories</h4>
<div class=widget__content>
<ul class=widget__list>
<li class=widget__item>
<a class=widget__link href=/categories/cs/>CS</a></li>
<li class=widget__item>
<a class=widget__link href=/categories/dsa/>DSA</a></li>
<li class=widget__item>
<a class=widget__link href=/categories/frontend/>Frontend</a></li>
<li class=widget__item>
<a class=widget__link href=/categories/middleware/>Middleware</a></li>
<li class=widget__item>
<a class=widget__link href=/categories/ml/>ML</a></li>
<li class=widget__item>
<a class=widget__link href=/categories/programming-language/>Programming Language</a></li>
<li class=widget__item>
<a class=widget__link href=/categories/public-cloud/>Public Cloud</a></li>
<li class=widget__item>
<a class=widget__link href=/categories/security/>Security</a></li>
<li class=widget__item>
<a class=widget__link href=/categories/software-design/>Software Design</a></li>
<li class=widget__item>
<a class=widget__link href=/categories/system-design/>System Design</a></li>
</ul>
</div>
</div>
<div class="widget-taglist widget">
<h4 class=widget__title>Tags</h4>
<div class=widget__content>
<a class="widget-taglist__link widget__link btn" href=/tags/array/ title=Array>Array</a>
<a class="widget-taglist__link widget__link btn" href=/tags/asynchronous-programming/ title="Asynchronous Programming">Asynchronous Programming</a>
<a class="widget-taglist__link widget__link btn" href=/tags/aws/ title=AWS>AWS</a>
<a class="widget-taglist__link widget__link btn" href=/tags/bfs/ title=BFS>BFS</a>
<a class="widget-taglist__link widget__link btn" href=/tags/c++/ title=C++>C++</a>
<a class="widget-taglist__link widget__link btn" href=/tags/cnn/ title=CNN>CNN</a>
<a class="widget-taglist__link widget__link btn" href=/tags/db/ title=DB>DB</a>
<a class="widget-taglist__link widget__link btn" href=/tags/design-pattern/ title="Design Pattern">Design Pattern</a>
<a class="widget-taglist__link widget__link btn" href=/tags/dfs/ title=DFS>DFS</a>
<a class="widget-taglist__link widget__link btn" href=/tags/english-article/ title="English Article">English Article</a>
<a class="widget-taglist__link widget__link btn" href=/tags/gcp/ title=GCP>GCP</a>
<a class="widget-taglist__link widget__link btn" href=/tags/go/ title=Go>Go</a>
<a class="widget-taglist__link widget__link btn" href=/tags/graph/ title=Graph>Graph</a>
<a class="widget-taglist__link widget__link btn" href=/tags/hash-set/ title="Hash Set">Hash Set</a>
<a class="widget-taglist__link widget__link btn" href=/tags/hash-table/ title="Hash Table">Hash Table</a>
<a class="widget-taglist__link widget__link btn" href=/tags/heap/ title=Heap>Heap</a>
<a class="widget-taglist__link widget__link btn" href=/tags/ipc/ title=IPC>IPC</a>
<a class="widget-taglist__link widget__link btn" href=/tags/japanese-article/ title="Japanese Article">Japanese Article</a>
<a class="widget-taglist__link widget__link btn" href=/tags/javascript/ title=JavaScript>JavaScript</a>
<a class="widget-taglist__link widget__link btn" href=/tags/linked-list/ title="Linked List">Linked List</a>
<a class="widget-taglist__link widget__link btn" href=/tags/network/ title=Network>Network</a>
<a class="widget-taglist__link widget__link btn" href=/tags/oauth/ title=OAuth>OAuth</a>
<a class="widget-taglist__link widget__link btn" href=/tags/oop/ title=OOP>OOP</a>
<a class="widget-taglist__link widget__link btn" href=/tags/os/ title=OS>OS</a>
<a class="widget-taglist__link widget__link btn" href=/tags/python/ title=Python>Python</a>
<a class="widget-taglist__link widget__link btn" href=/tags/queue/ title=Queue>Queue</a>
<a class="widget-taglist__link widget__link btn" href=/tags/react/ title=React>React</a>
<a class="widget-taglist__link widget__link btn" href=/tags/redis/ title=Redis>Redis</a>
<a class="widget-taglist__link widget__link btn" href=/tags/redux/ title=Redux>Redux</a>
<a class="widget-taglist__link widget__link btn" href=/tags/stack/ title=Stack>Stack</a>
<a class="widget-taglist__link widget__link btn" href=/tags/terraform/ title=Terraform>Terraform</a>
<a class="widget-taglist__link widget__link btn" href=/tags/terraform-cloud/ title="Terraform Cloud">Terraform Cloud</a>
<a class="widget-taglist__link widget__link btn" href=/tags/tree/ title=Tree>Tree</a>
<a class="widget-taglist__link widget__link btn" href=/tags/trie/ title=Trie>Trie</a>
<a class="widget-taglist__link widget__link btn" href=/tags/web-vulnerability/ title="Web Vulnerability">Web Vulnerability</a>
</div>
</div>
<div class="widget-social widget">
<h4 class="widget-social__title widget__title">Social</h4>
<div class="widget-social__content widget__content">
<div class="widget-social__item widget__item">
<a class="widget-social__link widget__link btn" title=LinkedIn rel="noopener noreferrer" href=https://linkedin.com/in/keigo-k-70557314b target=_blank><svg class="widget-social__link-icon icon icon-linkedin" width="24" height="24" viewBox="0 0 352 352"><path d="M0 40v272c0 21.9 18.1 40 40 40h272c21.9.0 40-18.1 40-40V40c0-21.9-18.1-40-40-40H40C18.1.0.0 18.1.0 40zm312-8c4.6.0 8 3.4 8 8v272c0 4.6-3.4 8-8 8H40c-4.6.0-8-3.4-8-8V40c0-4.6 3.4-8 8-8H312zM59.5 87c0 15.2 12.3 27.5 27.5 27.5s27.5-12.3 27.5-27.5S102.2 59.5 87 59.5 59.5 71.8 59.5 87zM187 157h-1v-21h-45v152h47v-75c0-19.8 3.9-39 28.5-39 24.2.0 24.5 22.4 24.5 40v74h47v-83.5c0-40.9-8.7-72-56.5-72-23 0-38.2 12.6-44.5 24.5zM64 288h47.5V136H64V288z"/></svg>
<span>LinkedIn</span>
</a>
</div>
<div class="widget-social__item widget__item">
<a class="widget-social__link widget__link btn" title=GitHub rel="noopener noreferrer" href=https://github.com/moonorange target=_blank><svg class="widget-social__link-icon icon icon-github" width="24" height="24" viewBox="0 0 384 374"><path d="m192 0C85.9.0.0 85.8.0 191.7c0 84.7 55 156.6 131.3 181.9 9.6 1.8 13.1-4.2 13.1-9.2.0-4.6-.2-16.6-.3-32.6-53.4 11.6-64.7-25.7-64.7-25.7-8.7-22.1-21.3-28-21.3-28-17.4-11.9 1.3-11.6 1.3-11.6 19.3 1.4 29.4 19.8 29.4 19.8 17.1 29.3 44.9 20.8 55.9 15.9 1.7-12.4 6.7-20.8 12.2-25.6-42.6-4.8-87.5-21.3-87.5-94.8.0-20.9 7.5-38 19.8-51.4-2-4.9-8.6-24.3 1.9-50.7.0.0 16.1-5.2 52.8 19.7 15.3-4.2 31.7-6.4 48.1-6.5 16.3.1 32.7 2.2 48.1 6.5 36.7-24.8 52.8-19.7 52.8-19.7 10.5 26.4 3.9 45.9 1.9 50.7 12.3 13.4 19.7 30.5 19.7 51.4.0 73.7-44.9 89.9-87.7 94.6 6.9 5.9 13 17.6 13 35.5.0 25.6-.2 46.3-.2 52.6.0 5.1 3.5 11.1 13.2 9.2C329 348.2 384 276.4 384 191.7 384 85.8 298 0 192 0z"/></svg>
<span>GitHub</span>
</a>
</div>
</div>
</div>
</aside>
</div>
<footer class=footer>
<div class="container footer__container flex">
<div class=footer__copyright>
&copy; 2022 Keigo Kida.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span>
</div>
</div>
</footer>
</div>
<script async defer src=/js/menu.js></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
</body>
</html>